parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"NmNU":[function(require,module,exports) {
var define;
var t;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}parcelRequire=function(r,n,a,o){var i="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function l(t,e){if(!n[t]){if(!r[t]){var a="function"==typeof parcelRequire&&parcelRequire;if(!e&&a)return a(t,!0);if(i)return i(t,!0);if(u&&"string"==typeof t)return u(t);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}c.resolve=function(e){return r[t][1][e]||e},c.cache={};var s=n[t]=new l.Module(t);r[t][0].call(s.exports,c,s,s.exports,this)}return n[t].exports;function c(t){return l(c.resolve(t))}}l.isParcelRequire=!0,l.Module=function(t){this.id=t,this.bundle=l,this.exports={}},l.modules=r,l.cache=n,l.parent=i,l.register=function(t,e){r[t]=[function(t,r){r.exports=e},{}]};for(var s=0;s<a.length;s++)l(a[s]);if(a.length){var c=l(a[a.length-1]);"object"==("undefined"==typeof exports?"undefined":e(exports))&&"undefined"!=typeof module?module.exports=c:"function"==typeof t&&t.amd&&t(function(){return c})}return l}({Focm:[function(t,e,r){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){e&&a(t.prototype,e),r&&a(t,r)}(t,[{key:"deserializeAnnotation",value:function(t){var e=this.constructor.attributeMap,r=t.split(","),a={},o=!0,i=!1,u=void 0;try{for(var l,s=r[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c,y=n(l.value.split("="),2),f=y[0],p=y[1],g=this.getKeyByValue(e,f);c="text"===g||"actionType"===g||"actionUrl"===g||"type"===g||"style"===g?decodeURIComponent(p):parseFloat(p,10),a[g]=c}}catch(h){i=!0,u=h}finally{try{o||null==s.return||s.return()}finally{if(i)throw u}}return a}},{key:"serializeAnnotation",value:function(t){var e=this.constructor.attributeMap,r="";for(var n in t){var a=e[n];if(("text"===n||"actionType"===n||"actionUrl"===n)&&a&&t.hasOwnProperty(n)){var o=encodeURIComponent(t[n]);r+="".concat(a,"=").concat(o,",")}else a&&t.hasOwnProperty(n)&&"text"!==n&&"actionType"!==n&&"actionUrl"!==n&&(r+="".concat(a,"=").concat(t[n],","))}return r.substring(0,r.length-1)}},{key:"deserializeAnnotationList",value:function(t){var e=t.split(";");e.length=e.length-1;var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var l=i.value;r.push(this.deserializeAnnotation(l))}}catch(s){a=!0,o=s}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}},{key:"serializeAnnotationList",value:function(t){var e="",r=!0,n=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var u=o.value;e+=this.serializeAnnotation(u)+";"}}catch(l){n=!0,a=l}finally{try{r||null==i.return||i.return()}finally{if(n)throw a}}return e}},{key:"xmlToDom",value:function(t){return(new DOMParser).parseFromString(t,"application/xml")}},{key:"getAnnotationsFromXml",value:function(t){return this.xmlToDom(t).getElementsByTagName("annotation")}},{key:"parseYoutubeAnnotationList",value:function(t){var e=[],r=!0,n=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var u=o.value,l=this.parseYoutubeAnnotation(u);l&&e.push(l)}}catch(s){n=!0,a=s}finally{try{r||null==i.return||i.return()}finally{if(n)throw a}}return e}},{key:"parseYoutubeAnnotation",value:function(t){var e=t,r=this.getAttributesFromBase(e);if(!r.type||"pause"===r.type)return null;var n=this.getTextFromBase(e),a=this.getActionFromBase(e),o=this.getBackgroundShapeFromBase(e);if(!o)return null;var i=o.timeRange.start,u=o.timeRange.end;if(isNaN(i)||isNaN(u)||null===i||null===u)return null;var l=this.getAppearanceFromBase(e),s={type:r.type,x:o.x,y:o.y,width:o.width,height:o.height,timeStart:i,timeEnd:u};return r.style&&(s.style=r.style),n&&(s.text=n),a&&(s=Object.assign(a,s)),l&&(s=Object.assign(l,s)),o.hasOwnProperty("sx")&&(s.sx=o.sx),o.hasOwnProperty("sy")&&(s.sy=o.sy),s}},{key:"getBackgroundShapeFromBase",value:function(t){var e=t.getElementsByTagName("movingRegion")[0];if(!e)return null;var r=e.getAttribute("type"),n=e.getElementsByTagName("".concat(r,"Region")),a=this.extractRegionTime(n),o={type:r,x:parseFloat(n[0].getAttribute("x"),10),y:parseFloat(n[0].getAttribute("y"),10),width:parseFloat(n[0].getAttribute("w"),10),height:parseFloat(n[0].getAttribute("h"),10),timeRange:a},i=n[0].getAttribute("sx"),u=n[0].getAttribute("sy");return i&&(o.sx=parseFloat(i,10)),u&&(o.sy=parseFloat(u,10)),o}},{key:"getAttributesFromBase",value:function(t){var e={};return e.type=t.getAttribute("type"),e.style=t.getAttribute("style"),e}},{key:"getTextFromBase",value:function(t){var e=t.getElementsByTagName("TEXT")[0];if(e)return e.textContent}},{key:"getActionFromBase",value:function(t){var e=t.getElementsByTagName("action")[0];if(!e)return null;e.getAttribute("type");var r=e.getElementsByTagName("url")[0];if(!r)return null;var n=r.getAttribute("value");if(n.startsWith("https://www.youtube.com/")){var a=new URL(n),o=a.searchParams.get("src_vid"),i=a.searchParams.get("v");return this.linkOrTimestamp(a,o,i)}}},{key:"linkOrTimestamp",value:function(t,e,r){if(e&&r&&e===r){var n=0,a=t.hash;if(a&&a.startsWith("#t=")){var o=t.hash.split("#t=")[1];n=this.timeStringToSeconds(o)}return{actionType:"time",actionSeconds:n}}return{actionType:"url",actionUrl:t.href}}},{key:"getAppearanceFromBase",value:function(t){var e=t.getElementsByTagName("appearance")[0];if(e){var r=e.getAttribute("bgAlpha"),n=e.getAttribute("bgColor"),a=e.getAttribute("fgColor"),o=e.getAttribute("textSize"),i={};return r&&(i.bgOpacity=parseFloat(r,10)),n&&(i.bgColor=parseInt(n,10)),a&&(i.fgColor=parseInt(a,10)),o&&(i.textSize=parseFloat(o,10)),i}}},{key:"extractRegionTime",value:function(t){var e=t[0].getAttribute("t");e=this.hmsToSeconds(e);var r=t[t.length-1].getAttribute("t");return{start:e,end:r=this.hmsToSeconds(r)}}},{key:"hmsToSeconds",value:function(t){for(var e=t.split(":"),r=0,n=1;e.length>0;)r+=n*parseFloat(e.pop(),10),n*=60;return r}},{key:"timeStringToSeconds",value:function(t){var e=0,r=t.split("h"),n=(r[1]||t).split("m"),a=(n[1]||t).split("s");return r[0]&&2===r.length&&(e+=60*parseInt(r[0],10)*60),n[0]&&2===n.length&&(e+=60*parseInt(n[0],10)),a[0]&&2===a.length&&(e+=parseInt(a[0],10)),e}},{key:"getKeyByValue",value:function(t,e){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e)return r}}],[{key:"attributeMap",get:function(){return{type:"tp",style:"s",x:"x",y:"y",width:"w",height:"h",sx:"sx",sy:"sy",timeStart:"ts",timeEnd:"te",text:"t",actionType:"at",actionUrl:"au",actionSeconds:"as",bgOpacity:"bgo",bgColor:"bgc",fgColor:"fgc",textSize:"txsz"}}}]),t}();window.AnnotationParser=o},{}]},{},["Focm"]);
},{}],"KmNR":[function(require,module,exports) {
var define;
var t;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}parcelRequire=function(n,i,s,a){var o="function"==typeof parcelRequire&&parcelRequire,r="function"==typeof require&&require;function l(t,e){if(!i[t]){if(!n[t]){var s="function"==typeof parcelRequire&&parcelRequire;if(!e&&s)return s(t,!0);if(o)return o(t,!0);if(r&&"string"==typeof t)return r(t);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}h.resolve=function(e){return n[t][1][e]||e},h.cache={};var c=i[t]=new l.Module(t);n[t][0].call(c.exports,h,c,c.exports,this)}return i[t].exports;function h(t){return l(h.resolve(t))}}l.isParcelRequire=!0,l.Module=function(t){this.id=t,this.bundle=l,this.exports={}},l.modules=n,l.cache=i,l.parent=o,l.register=function(t,e){n[t]=[function(t,n){n.exports=e},{}]};for(var c=0;c<s.length;c++)l(s[c]);if(s.length){var h=l(s[s.length-1]);"object"==("undefined"==typeof exports?"undefined":e(exports))&&"undefined"!=typeof module?module.exports=h:"function"==typeof t&&t.amd&&t(function(){return h})}return l}({vKFU:[function(t,e,n){},{}],onSs:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n.getFinalAnnotationColor=r,n.decimalToHex=o,n.NoteAnnotation=n.default=void 0;var a=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("Annotation data must be provided");this.data=e,this.element=document.createElement("div"),this.element.classList.add("__cxt-ar-annotation__"),this.closeElement=this.setupCloseElement(),this.element.append(this.closeElement),this.data.text&&(this.textElement=document.createElement("span"),this.textElement.textContent=this.data.text,this.element.append(this.textElement)),this.setupAppearance(),"speech"!==this.data.style&&"title"!==this.data.style&&this.setupHoverAppearance(),this.element.setAttribute("data-ar-type",this.data.type),this.element.setAttribute("hidden",""),this.textScaling=100,this.paddingMultiplier=1,this.closeButtonScaling=.0423,this.closeButtonOffset=-1.8}return s(t,null,[{key:"defaultAppearanceAttributes",get:function(){return{bgColor:16777215,bgOpacity:.8,fgColor:0,textSize:3.15}}}]),s(t,[{key:"setupCloseElement",value:function(){var t=this,e=this.createCloseElement();return e.addEventListener("click",function(e){t.element.setAttribute("hidden",""),t.element.setAttribute("data-ar-closed","")}),e}},{key:"setupAppearance",value:function(){var t=this.constructor.defaultAppearanceAttributes;isNaN(this.data.textSize)||(t.textSize=this.data.textSize),isNaN(this.data.fgColor)||(t.fgColor=this.data.fgColor),isNaN(this.data.bgColor)||(t.bgColor=this.data.bgColor),this.data.bgColor=t.bgColor,this.data.bgOpacity=t.bgOpacity,this.data.fgColor=t.fgColor,this.data.textSize=t.textSize,this.element.style.color="#"+o(t.fgColor)}},{key:"setupHoverAppearance",value:function(){var t=this,e=this.data,n=e.bgOpacity,i=e.bgColor,s=r(n,i);this.element.style.backgroundColor=s,this.element.addEventListener("mouseenter",function(){t.element.style.backgroundColor=r(n,i,!0),t.closeElement.style.display="block"}),this.element.addEventListener("mouseleave",function(){t.element.style.backgroundColor=r(n,i,!1),t.closeElement.style.display="none"}),"url"===this.data.actionType&&(this.element.style.cursor="pointer")}},{key:"createCloseElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 100 100"),e.classList.add("__cxt-ar-annotation-close__");var n=document.createElementNS(e.namespaceURI,"path");n.setAttribute("d","M25 25 L 75 75 M 75 25 L 25 75"),n.setAttribute("stroke","#bbb"),n.setAttribute("stroke-width",t),n.setAttribute("x",5),n.setAttribute("y",5);var i=document.createElementNS(e.namespaceURI,"circle");return i.setAttribute("cx",50),i.setAttribute("cy",50),i.setAttribute("r",50),e.append(i,n),e}},{key:"show",value:function(){this.element.removeAttribute("hidden")}},{key:"hide",value:function(){this.element.setAttribute("hidden","")}},{key:"updateTextSize",value:function(t){if(this.data.textSize){var e=this.data.textSize/this.textScaling*t;this.fontSize="".concat(e,"px")}}},{key:"updateCloseSize",value:function(t){var e=t*this.closeButtonScaling;this.closeElement.style.width=e+"px",this.closeElement.style.height=e+"px",this.closeElement.style.right=e/this.closeButtonOffset+"px",this.closeElement.style.top=e/this.closeButtonOffset+"px",this.closeButtonSize=e}},{key:"setDimensions",value:function(t,e,n,i){this.left=t,this.top=e,this.width=n,this.height=i}},{key:"setPadding",value:function(t,e){t=t*this.paddingMultiplier+"px",e=e*this.paddingMultiplier+"px",this.element.style.padding="".concat(e," ").concat(t," ").concat(e," ").concat(t)}},{key:"closed",get:function(){return this.element.hasAttribute("data-ar-closed")}},{key:"hidden",get:function(){return this.element.hasAttribute("hidden")}},{key:"type",get:function(){return this.data.type}},{key:"style",get:function(){return this.data.style}},{key:"left",set:function(t){this.element.style.left=t}},{key:"top",set:function(t){this.element.style.top=t}},{key:"width",set:function(t){this.element.style.width=t}},{key:"height",set:function(t){this.element.style.height=t}},{key:"fontSize",set:function(t){this.element.style.fontSize=t}}]),t}();function o(t){var e=t.toString(16);return"000000".substr(0,6-e.length)+e}function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:230;if(!isNaN(t)&&!isNaN(e)){var s=n?i.toString(16):Math.floor(255*t).toString(16),a=o(e);return"#".concat(a).concat(s)}return"#FFFFFFFF"}n.NoteAnnotation=a;var l=a;n.default=l},{}],tZXz:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=t("./note.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==e(Symbol.iterator)?function(t){return e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)})(t)}function o(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}var u=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,r(e).call(this,t))).createSpeechBubble(),n.setupHoverAppearance(),n.textX=0,n.textY=0,n.textWidth=0,n.textHeight=0,n.baseStartX=0,n.baseStartY=0,n.baseEndX=0,n.baseEndY=0,n.pointX=0,n.pointY=0,n.directionPadding=20,n.paddingMultiplier=2,n}return h(e,s.NoteAnnotation),c(e,null,[{key:"horizontalBaseStartMultiplier",get:function(){return.17379070765180116}},{key:"horizontalBaseEndMultiplier",get:function(){return.14896346370154384}},{key:"verticalBaseStartMultiplier",get:function(){return.12}},{key:"verticalBaseEndMultiplier",get:function(){return.3}}]),c(e,[{key:"getPointDirection",value:function(t,e,n,i,s,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:20;return s>t+n-n/2&&a>e+i?"br":s<t+n-n/2&&a>e+i?"bl":s>t+n-n/2&&a<e-o?"tr":s<t+n-n/2&&a<e?"tl":s>t+n&&a>e-o&&a<e+i-o?"r":s<t&&a>e&&a<e+i?"l":void 0}},{key:"createSpeechBubble",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"white";this.speechSvg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.speechSvg.classList.add("__cxt-ar-annotation-speech-bubble__"),this.speechSvg.style.position="absolute",this.speechSvg.setAttribute("width","100%"),this.speechSvg.setAttribute("height","100%"),this.speechSvg.style.left="0",this.speechSvg.style.left="0",this.speechSvg.style.display="block",this.speechSvg.style.overflow="visible",this.speechTriangle=document.createElementNS("http://www.w3.org/2000/svg","path"),this.speechTriangle.setAttribute("fill",t),this.speechSvg.append(this.speechTriangle),this.element.prepend(this.speechSvg)}},{key:"updateSpeechBubble",value:function(t,e,n,i,s,a){arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]&&arguments[7];var o=this.constructor.horizontalBaseStartMultiplier,r=this.constructor.horizontalBaseEndMultiplier,l=this.constructor.verticalBaseStartMultiplier,c=this.constructor.verticalBaseEndMultiplier,h=this.getPointDirection(t,e,n,i,s,a,this.directionPadding),u="";if("br"===h)this.baseStartX=n-n*o*2,this.baseEndX=this.baseStartX+n*r,this.baseStartY=i,this.baseEndY=i,this.pointX=s-t,this.pointY=a-e,this.height=a-e+"px",u="L".concat(n," ").concat(i," L").concat(n," 0 L0 0 L0 ").concat(this.baseStartY," L").concat(this.baseStartX," ").concat(this.baseStartY),this.textWidth=n,this.textHeight=i,this.textX=0,this.textY=0;else if("bl"===h)this.baseStartX=n*o,this.baseEndX=this.baseStartX+n*r,this.baseStartY=i,this.baseEndY=i,this.pointX=s-t,this.pointY=a-e,this.height="".concat(a-e,"px"),u="L".concat(n," ").concat(i," L").concat(n," 0 L0 0 L0 ").concat(this.baseStartY," L").concat(this.baseStartX," ").concat(this.baseStartY),this.textWidth=n,this.textHeight=i,this.textX=0,this.textY=0;else if("tr"===h){this.baseStartX=n-n*o*2,this.baseEndX=this.baseStartX+n*r;var d=e-a;this.baseStartY=d,this.baseEndY=d,this.top=e-d+"px",this.height=i+d+"px",this.pointX=s-t,this.pointY=0,u="L".concat(n," ").concat(d," L").concat(n," ").concat(i+d," L0 ").concat(i+d," L0 ").concat(d," L").concat(this.baseStartX," ").concat(this.baseStartY),this.textWidth=n,this.textHeight=i,this.textX=0,this.textY=d}else if("tl"===h){this.baseStartX=n*o,this.baseEndX=this.baseStartX+n*r;var p=e-a;this.baseStartY=p,this.baseEndY=p,this.top=e-p+"px",this.height=i+p+"px",this.pointX=s-t,this.pointY=0,u="L".concat(n," ").concat(p," L").concat(n," ").concat(i+p," L0 ").concat(i+p," L0 ").concat(p," L").concat(this.baseStartX," ").concat(this.baseStartY),this.textWidth=n,this.textHeight=i,this.textX=0,this.textY=p}else if("r"===h){var f=s-(t+n);this.baseStartX=n,this.baseEndX=n,this.width=n+f+"px",this.baseStartY=i*l,this.baseEndY=this.baseStartY+i*c,this.pointX=n+f,this.pointY=a-e,u="L".concat(this.baseStartX," ").concat(i," L0 ").concat(i," L0 0 L").concat(this.baseStartX," 0 L").concat(this.baseStartX," ").concat(this.baseStartY),this.textWidth=n,this.textHeight=i,this.textX=0,this.textY=0}else if("l"===h){var v=t-s;this.baseStartX=v,this.baseEndX=v,this.left=t-v+"px",this.width=n+v+"px",this.baseStartY=i*l,this.baseEndY=this.baseStartY+i*c,this.pointX=0,this.pointY=a-e,u="L".concat(this.baseStartX," ").concat(i," L").concat(n+this.baseStartX," ").concat(i," L").concat(n+this.baseStartX," 0 L").concat(this.baseStartX," 0 L").concat(this.baseStartX," ").concat(this.baseStartY),this.textWidth=n,this.textHeight=i,this.textX=v,this.textY=0}this.textElement&&(this.textElement.style.left=this.textX+"px",this.textElement.style.top=this.textY+"px",this.textElement.style.width=this.textWidth+"px",this.textElement.style.height=this.textHeight+"px"),this.closeElement&&this.closeButtonSize&&(this.closeElement.style.left=this.textX+this.textWidth+this.closeButtonSize/this.closeButtonOffset+"px",this.closeElement.style.top=this.textY+this.closeButtonSize/this.closeButtonOffset+"px");var y="M".concat(this.baseStartX," ").concat(this.baseStartY," L").concat(this.pointX," ").concat(this.pointY," L").concat(this.baseEndX," ").concat(this.baseEndY," ").concat(u);this.speechTriangle.setAttribute("d",y)}},{key:"updateCloseSize",value:function(t){var e=t*this.closeButtonScaling;this.closeElement.style.width=e+"px",this.closeElement.style.height=e+"px",this.closeButtonSize=e}},{key:"setupHoverAppearance",value:function(){var t=this,e=this.data,n=e.bgOpacity,i=e.bgColor;this.speechTriangle.addEventListener("mouseover",function(){t.closeElement.style.display="block",t.closeElement.style.cursor="pointer",t.speechTriangle.setAttribute("fill",(0,s.getFinalAnnotationColor)(n,i,!0))}),this.speechTriangle.addEventListener("mouseout",function(e){e.relatedTarget.classList.contains("__cxt-ar-annotation-close__")||(t.closeElement.style.display="none",t.closeElement.style.cursor="default",t.speechTriangle.setAttribute("fill",(0,s.getFinalAnnotationColor)(n,i,!1)))}),this.closeElement.addEventListener("mouseleave",function(){t.closeElement.style.display="none",t.closeElement.style.cursor="default",t.speechTriangle.style.cursor="default",t.speechTriangle.setAttribute("fill",(0,s.getFinalAnnotationColor)(n,i,!1))}),"url"===this.data.actionType&&(this.element.style.cursor="pointer")}},{key:"setPadding",value:function(t,e){t=t*this.paddingMultiplier+"px",e=e*this.paddingMultiplier+"px",this.textElement.style.padding="".concat(e," ").concat(t," ").concat(e," ").concat(t)}}]),e}();i.default=u},{"./note.js":"onSs"}],Focm:[function(t,e,n){"use strict";t("./index.css");var i=a(t("./annotations/note.js")),s=a(t("./annotations/speech.js"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(e,n,i){var s=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("Annotation objects must be provided");if(!n)throw new Error("An element to contain the annotations must be provided");i&&i.getVideoTime&&i.seekTo?this.playerOptions=i:console.info("AnnotationRenderer is running without a player. The update method will need to be called manually."),this.annotations=[],this.container=n,this.annotationsContainer=document.createElement("div"),this.annotationsContainer.classList.add("__cxt-ar-annotations-container__"),this.annotationsContainer.setAttribute("data-layer","4"),this.annotationsContainer.addEventListener("click",function(t){s.annotationClickHandler(t)}),this.container.prepend(this.annotationsContainer),this.createAnnotationElements(e),this.updateAllAnnotationSizes(),window.addEventListener("DOMContentLoaded",function(t){s.updateAllAnnotationSizes()}),this.updateInterval=a,this.updateIntervalId=null}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"changeAnnotationData",value:function(t){this.stop(),this.removeAnnotationElements(),this.annotations=t,this.createAnnotationElements(),this.start()}},{key:"createAnnotationElements",value:function(t){var e=!0,n=!1,a=void 0;try{for(var o,r=t[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var l,c=o.value;l="speech"===c.style?new s.default(c):new i.default(c),this.annotations.push(l),this.annotationsContainer.append(l.element)}}catch(h){n=!0,a=h}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}}},{key:"createCloseElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 100 100"),t.classList.add("__cxt-ar-annotation-close__");var e=document.createElementNS(t.namespaceURI,"path");e.setAttribute("d","M25 25 L 75 75 M 75 25 L 25 75"),e.setAttribute("stroke","#bbb"),e.setAttribute("stroke-width",10),e.setAttribute("x",5),e.setAttribute("y",5);var n=document.createElementNS(t.namespaceURI,"circle");return n.setAttribute("cx",50),n.setAttribute("cy",50),n.setAttribute("r",50),t.append(n,e),t}},{key:"removeAnnotationElements",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,s=this.annotations[Symbol.iterator]();!(t=(i=s.next()).done);t=!0)i.value.element.remove()}catch(a){e=!0,n=a}finally{try{t||null==s.return||s.return()}finally{if(e)throw n}}}},{key:"update",value:function(t){var e=!0,n=!1,i=void 0;try{for(var s,a=this.annotations[Symbol.iterator]();!(e=(s=a.next()).done);e=!0){var o=s.value;if(!o.closed){var r=o.data.timeStart,l=o.data.timeEnd;o.hidden&&t>=r&&t<l?o.show():!o.hidden&&(t<r||t>l)&&o.hide()}}}catch(c){n=!0,i=c}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"start",value:function(){var t=this;if(!this.playerOptions)throw new Error("playerOptions must be provided to use the start method");var e=this.playerOptions.getVideoTime();this.updateIntervalId||(this.update(e),this.updateIntervalId=setInterval(function(){var e=t.playerOptions.getVideoTime();t.update(e),window.dispatchEvent(new CustomEvent("__ar_renderer_start"))},this.updateInterval))}},{key:"stop",value:function(){if(!this.playerOptions)throw new Error("playerOptions must be provided to use the stop method");var t=this.playerOptions.getVideoTime();this.updateIntervalId&&(this.update(t),clearInterval(this.updateIntervalId),this.updateIntervalId=null,window.dispatchEvent(new CustomEvent("__ar_renderer_stop")))}},{key:"updateAnnotationDimensions",value:function(t,e,n){var i=this.container.getBoundingClientRect().width,s=this.container.getBoundingClientRect().height,a=i/e,o=s/n,r=i,l=s;a%1==0&&o%1==0||(a>o?(r=s/n*e,l=s):o>a&&(r=i,l=i/e*n));var c=(i-r)/2/i*100,h=(s-l)/2/s*100,u=r/i,d=l/s,p=!0,f=!1,v=void 0;try{for(var y,b=t[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var m=y.value,g=c+m.data.x*u,x=h+m.data.y*d,S=m.data.width*u,E=m.data.height*d;m.setDimensions("".concat(g,"%"),"".concat(x,"%"),"".concat(S,"%"),"".concat(E,"%"));var w=.008*r,A=.008*l;if(m.setPadding(w,A),"speech"===m.style&&m.speechSvg){var _=this.percentToPixels(i,g),k=this.percentToPixels(s,x),L=this.percentToPixels(i,S),C=this.percentToPixels(s,E),X=c+m.data.sx*u,O=h+m.data.sy*d;X=this.percentToPixels(i,X),O=this.percentToPixels(s,O),m.updateSpeechBubble(_,k,L,C,X,O,null)}m.updateTextSize(l),m.updateCloseSize(l)}}catch(Y){f=!0,v=Y}finally{try{p||null==b.return||b.return()}finally{if(f)throw v}}}},{key:"updateAllAnnotationSizes",value:function(){if(this.playerOptions&&this.playerOptions.getOriginalVideoWidth&&this.playerOptions.getOriginalVideoHeight){var t=this.playerOptions.getOriginalVideoWidth(),e=this.playerOptions.getOriginalVideoHeight();this.updateAnnotationDimensions(this.annotations,t,e)}else{var n=this.container.getBoundingClientRect().width,i=this.container.getBoundingClientRect().height;this.updateAnnotationDimensions(this.annotations,n,i)}}},{key:"hideAll",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,s=this.annotations[Symbol.iterator]();!(t=(i=s.next()).done);t=!0)i.value.hide()}catch(a){e=!0,n=a}finally{try{t||null==s.return||s.return()}finally{if(e)throw n}}}},{key:"annotationClickHandler",value:function(t){var e=t.target;if(!e.matches(".__cxt-ar-annotation__")&&!e.closest(".__cxt-ar-annotation-close__")&&!(e=e.closest(".__cxt-ar-annotation__")))return null;var n=e.__annotation;if(e&&n)if("time"===n.actionType){var i=n.actionSeconds;if(this.playerOptions){this.playerOptions.seekTo(i);var s=this.playerOptions.getVideoTime();this.update(s)}window.dispatchEvent(new CustomEvent("__ar_seek_to",{detail:{seconds:i}}))}else if("url"===n.actionType){var a={url:n.actionUrl},o=this.extractTimeHash(new URL(a.url));o&&o.hasOwnProperty("seconds")&&(a.seconds=o.seconds),window.dispatchEvent(new CustomEvent("__ar_annotation_click",{detail:a}))}}},{key:"setUpdateInterval",value:function(t){this.updateInterval=t,this.stop(),this.start()}},{key:"extractTimeHash",value:function(t){if(!t)throw new Error("A URL must be provided");var e=t.hash;if(e&&e.startsWith("#t=")){var n=t.hash.split("#t=")[1];return{seconds:this.timeStringToSeconds(n)}}return!1}},{key:"timeStringToSeconds",value:function(t){var e=0,n=t.split("h"),i=(n[1]||t).split("m"),s=(i[1]||t).split("s");return n[0]&&2===n.length&&(e+=60*parseInt(n[0],10)*60),i[0]&&2===i.length&&(e+=60*parseInt(i[0],10)),s[0]&&2===s.length&&(e+=parseInt(s[0],10)),e}},{key:"percentToPixels",value:function(t,e){return t*e/100}}]),t}();window.AnnotationRenderer=r},{"./index.css":"vKFU","./annotations/note.js":"onSs","./annotations/speech.js":"tZXz"}]},{},["Focm"]);
},{}],"Focm":[function(require,module,exports) {
"use strict";var e=t(require("../dist/AnnotationParser.js")),r=t(require("../dist/AnnotationRenderer.js"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"../dist/AnnotationParser.js":"NmNU","../dist/AnnotationRenderer.js":"KmNR"}]},{},["Focm"], null)