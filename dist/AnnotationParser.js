parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"Focm":[function(require,module,exports) {
function t(t,a){return n(t)||r(t,a)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(t,e){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(u){a=!0,i=u}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}function n(t){if(Array.isArray(t))return t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}var l=function(){function e(){a(this,e)}return o(e,[{key:"deserializeAnnotation",value:function(e){var r=this.constructor.attributeMap,n=e.split(","),a={},i=!0,o=!1,l=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var y=t(u.value.split("="),2),c=y[0],g=y[1],p=this.getKeyByValue(r,c),h="";h="text"===p||"actionType"===p||"actionUrl"===p||"type"===p||"style"===p?decodeURIComponent(g):parseFloat(g,10),a[p]=h}}catch(v){o=!0,l=v}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}return a}},{key:"serializeAnnotation",value:function(t){var e=this.constructor.attributeMap,r="";for(var n in t){var a=e[n];if(("text"===n||"actionType"===n||"actionUrl"===n)&&a&&t.hasOwnProperty(n)){var i=encodeURIComponent(t[n]);r+="".concat(a,"=").concat(i,",")}else a&&t.hasOwnProperty(n)&&"text"!==n&&"actionType"!==n&&"actionUrl"!==n&&(r+="".concat(a,"=").concat(t[n],","))}return r.substring(0,r.length-1)}},{key:"deserializeAnnotationList",value:function(t){var e=t.split(";");e.length=e.length-1;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value;r.push(this.deserializeAnnotation(u))}}catch(s){a=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}},{key:"serializeAnnotationList",value:function(t){var e="",r=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value;e+=this.serializeAnnotation(l)+";"}}catch(u){n=!0,a=u}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return e}},{key:"xmlToDom",value:function(t){return(new DOMParser).parseFromString(t,"application/xml")}},{key:"getAnnotationsFromXml",value:function(t){return this.xmlToDom(t).getElementsByTagName("annotation")}},{key:"parseYoutubeAnnotationList",value:function(t){var e=[],r=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value,u=this.parseYoutubeAnnotation(l);u&&e.push(u)}}catch(s){n=!0,a=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return e}},{key:"parseYoutubeAnnotation",value:function(t){var e=t,r=this.getAttributesFromBase(e);if(!r.type||"pause"===r.type)return null;var n=this.getTextFromBase(e),a=this.getActionFromBase(e),i=this.getBackgroundShapeFromBase(e);if(!i)return null;var o=i.timeRange.start,l=i.timeRange.end;if(isNaN(o)||isNaN(l)||null===o||null===l)return null;var u=this.getAppearanceFromBase(e),s={type:r.type,x:i.x,y:i.y,width:i.width,height:i.height,timeStart:o,timeEnd:l};return r.style&&(s.style=r.style),n&&(s.text=n),a&&(s=Object.assign(a,s)),u&&(s=Object.assign(u,s)),i.hasOwnProperty("sx")&&(s.sx=i.sx),i.hasOwnProperty("sy")&&(s.sy=i.sy),s}},{key:"getBackgroundShapeFromBase",value:function(t){var e=t.getElementsByTagName("movingRegion")[0];if(!e)return null;var r=e.getAttribute("type"),n=e.getElementsByTagName("".concat(r,"Region")),a=this.extractRegionTime(n),i={type:r,x:parseFloat(n[0].getAttribute("x"),10),y:parseFloat(n[0].getAttribute("y"),10),width:parseFloat(n[0].getAttribute("w"),10),height:parseFloat(n[0].getAttribute("h"),10),timeRange:a},o=n[0].getAttribute("sx"),l=n[0].getAttribute("sy");return o&&(i.sx=parseFloat(o,10)),l&&(i.sy=parseFloat(l,10)),i}},{key:"getAttributesFromBase",value:function(t){var e={};return e.type=t.getAttribute("type"),e.style=t.getAttribute("style"),e}},{key:"getTextFromBase",value:function(t){var e=t.getElementsByTagName("TEXT")[0];if(e)return e.textContent}},{key:"getActionFromBase",value:function(t){var e=t.getElementsByTagName("action")[0];if(!e)return null;e.getAttribute("type");var r=e.getElementsByTagName("url")[0];if(!r)return null;var n=r.getAttribute("value");if(n.startsWith("https://www.youtube.com/")){var a=new URL(n),i=a.searchParams.get("src_vid"),o=a.searchParams.get("v");return this.linkOrTimestamp(a,i,o)}}},{key:"linkOrTimestamp",value:function(t,e,r){if(e&&r&&e===r){var n=0,a=t.hash;if(a&&a.startsWith("#t=")){var i=t.hash.split("#t=")[1];n=this.timeStringToSeconds(i)}return{actionType:"time",actionSeconds:n}}return{actionType:"url",actionUrl:t.href}}},{key:"getAppearanceFromBase",value:function(t){var e=t.getElementsByTagName("appearance")[0];if(e){var r=e.getAttribute("bgAlpha"),n=e.getAttribute("bgColor"),a=e.getAttribute("fgColor"),i=e.getAttribute("textSize"),o={};return r&&(o.bgOpacity=parseFloat(r,10)),n&&(o.bgColor=parseInt(n,10)),a&&(o.fgColor=parseInt(a,10)),i&&(o.textSize=parseFloat(i,10)),o}}},{key:"extractRegionTime",value:function(t){var e=t[0].getAttribute("t");e=this.hmsToSeconds(e);var r=t[t.length-1].getAttribute("t");return{start:e,end:r=this.hmsToSeconds(r)}}},{key:"hmsToSeconds",value:function(t){for(var e=t.split(":"),r=0,n=1;e.length>0;)r+=n*parseFloat(e.pop(),10),n*=60;return r}},{key:"timeStringToSeconds",value:function(t){var e=0,r=t.split("h"),n=(r[1]||t).split("m"),a=(n[1]||t).split("s");return r[0]&&2===r.length&&(e+=60*parseInt(r[0],10)*60),n[0]&&2===n.length&&(e+=60*parseInt(n[0],10)),a[0]&&2===a.length&&(e+=parseInt(a[0],10)),e}},{key:"getKeyByValue",value:function(t,e){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e)return r}}],[{key:"attributeMap",get:function(){return{type:"tp",style:"s",x:"x",y:"y",width:"w",height:"h",sx:"sx",sy:"sy",timeStart:"ts",timeEnd:"te",text:"t",actionType:"at",actionUrl:"au",actionSeconds:"as",bgOpacity:"bgo",bgColor:"bgc",fgColor:"fgc",textSize:"txsz"}}}]),e}();window.AnnotationParser=l;
},{}]},{},["Focm"], null)